<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="clr-namespace:JsonWorkbench.ViewModels"
        xmlns:views="clr-namespace:JsonWorkbench.Views"
        x:Class="JsonWorkbench.Views.MainWindow"
        x:DataType="vm:MainWindowViewModel"
        Width="1200" Height="800"
        Title="JSON Workbench">
  <Design.DataContext>
    <vm:MainWindowViewModel/>
  </Design.DataContext>

  <DockPanel>
    <Border DockPanel.Dock="Top"
            Padding="12"
            Background="{DynamicResource HeaderBackgroundBrush}"
            BorderBrush="{DynamicResource PanelBorderBrush}"
            BorderThickness="0,0,0,1">
      <Grid ColumnDefinitions="*,Auto" VerticalAlignment="Center">
        <TextBlock Grid.Column="0"
                   Foreground="{DynamicResource HeaderForegroundBrush}"
                   FontSize="18"
                   Text="JSON Workbench (Vintage Story 1.21.6)"/>

        <!-- Tiny theme button (opens a menu). -->
        <Button Grid.Column="1"
                Name="ThemeButton"
                Width="26" Height="26"
                Padding="0"
                CornerRadius="13"
                BorderThickness="1"
                Background="{DynamicResource AccentBrush}"
                BorderBrush="{DynamicResource PanelBorderBrush}"
                ToolTip.Tip="Theme">
          <TextBlock Text="â—" HorizontalAlignment="Center" VerticalAlignment="Center"/>
          <Button.Flyout>
            <MenuFlyout>
              <MenuItem Header="Light (Default)" Click="ThemeLight_Click"/>
              <MenuItem Header="Nord" Click="ThemeNord_Click"/>
              <MenuItem Header="Dracula" Click="ThemeDracula_Click"/>
              <MenuItem Header="Monokai" Click="ThemeMonokai_Click"/>
            </MenuFlyout>
          </Button.Flyout>
        </Button>
      </Grid>
    </Border>

	<TabControl ItemsSource="{Binding Tabs}" SelectedItem="{Binding SelectedTab}" Margin="10">
	  <TabControl.DataTemplates>
	    <!-- JSON builder tabs -->
	    <DataTemplate DataType="{x:Type vm:WorkbenchTabViewModel}">
	      <views:WorkbenchTabView/>
	    </DataTemplate>

	    <!-- VTML / Handbook editor tab -->
	    <DataTemplate DataType="{x:Type vm:HandbookTabViewModel}">
	      <views:HandbookTabView/>
	    </DataTemplate>
	  </TabControl.DataTemplates>

      <TabControl.ItemTemplate>
        <DataTemplate x:DataType="vm:ITabViewModel">
          <TextBlock Text="{Binding Title}"/>
        </DataTemplate>
      </TabControl.ItemTemplate>
    </TabControl>
  </DockPanel>
</Window>
